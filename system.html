<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2196F3 0%, #21CBF3 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2196F3 0%, #21CBF3 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .content {
            padding: 30px;
        }
        
        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #2196F3;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        input, select {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .btn {
            background: linear-gradient(135deg, #2196F3 0%, #21CBF3 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin: 10px 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(33, 150, 243, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .results {
            display: none;
            background: #fff;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border: 2px solid #e9ecef;
        }
        
        .process-step {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
            position: relative;
        }
        
        .step-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .step-details {
            color: #6c757d;
            line-height: 1.6;
        }
        
        .timeline {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .timeline-dot {
            width: 12px;
            height: 12px;
            background: #2196F3;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .optimization-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .total-time {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 20px;
            font-weight: 600;
            margin: 20px 0;
        }
        
        .formula-comment {
            background: #e3f2fd;
            border: 1px solid #90caf9;
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 13px;
            color: #1565c0;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® –°–∏—Å—Ç–µ–º–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏ —Å —Ö—É–¥–æ–∂–Ω–∏—Ü–∏</h1>
            <p>–ò–∑—á–∏—Å–ª–µ—Ç–µ –≤—Ä–µ–º–µ—Ç—Ä–∞–µ–Ω–∏—è—Ç–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–π—Ç–µ –ø—Ä–æ—Ü–µ—Å–∏—Ç–µ</p>
        </div>
        
        <div class="content">
            <div class="form-section">
                <h2>üìù –í—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞</h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="orderType">–¢–∏–ø –ø–æ—Ä—ä—á–∫–∞:</label>
                        <select id="orderType">
                            <option value="COD">COD (–ù–∞–ª–æ–∂–µ–Ω –ø–ª–∞—Ç–µ–∂)</option>
                            <option value="CARD">CARD (–ö–∞—Ä—Ç–æ–≤–æ –ø–ª–∞—â–∞–Ω–µ)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="orderQuantity">–ë—Ä–æ–π –ø–æ—Ä—ä—á–∫–∏:</label>
                        <input type="number" id="orderQuantity" value="10" min="1">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="artistCount">–ë—Ä–æ–π —Ö—É–¥–æ–∂–Ω–∏—Ü–∏:</label>
                        <input type="number" id="artistCount" value="3" min="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="figureComplexity">–°–ª–æ–∂–Ω–æ—Å—Ç –Ω–∞ —Ñ–∏–≥—É—Ä–∫–∏—Ç–µ (1-5):</label>
                        <input type="number" id="figureComplexity" value="3" min="1" max="5">
                    </div>
                </div>
                
                <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞ —Ñ–æ—Ä–º—É–ª–∏ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–π—Ç–µ —Ç—É–∫)</h3>
                <div class="formula-comment">
                    <!-- –§–û–†–ú–£–õ–ê –ó–ê –í–†–ï–ú–ï –ó–ê –ü–û–¢–í–™–†–ñ–î–ï–ù–ò–ï -->
                    –í—Ä–µ–º–µ –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ (–¥–Ω–∏) = –±–∞–∑–æ–≤–æ_–≤—Ä–µ–º–µ * –∫–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç_—Å–ª–æ–∂–Ω–æ—Å—Ç
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="confirmationBaseTime">–ë–∞–∑–æ–≤–æ –≤—Ä–µ–º–µ –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ (–¥–Ω–∏):</label>
                        <input type="number" id="confirmationBaseTime" value="1" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="complexityMultiplier">–ö–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç:</label>
                        <input type="number" id="complexityMultiplier" value="1.2" step="0.1">
                    </div>
                </div>
                
                <div class="formula-comment">
                    <!-- –§–û–†–ú–£–õ–ê –ó–ê –í–†–ï–ú–ï –ó–ê –û–ë–†–ê–ë–û–¢–ö–ê –ù–ê –ü–ê–ö–ò–°–¢–ê–ù–¶–ò–¢–ï -->
                    –í—Ä–µ–º–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–∫–∏—Å—Ç–∞–Ω—Ü–∏ (–¥–Ω–∏) = –±–∞–∑–æ–≤–æ_–≤—Ä–µ–º–µ + (–±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ / –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç_–∑–∞_–¥–µ–Ω)
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="processingBaseTime">–ë–∞–∑–æ–≤–æ –≤—Ä–µ–º–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–¥–Ω–∏):</label>
                        <input type="number" id="processingBaseTime" value="1" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="processingCapacity">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç –Ω–∞ –¥–µ–Ω (–ø–æ—Ä—ä—á–∫–∏):</label>
                        <input type="number" id="processingCapacity" value="20" min="1">
                    </div>
                </div>
                
                <div class="formula-comment">
                    <!-- –§–û–†–ú–£–õ–ê –ó–ê –í–†–ï–ú–ï –ó–ê –ü–†–ò–ù–¢–ò–†–ê–ù–ï -->
                    –í—Ä–µ–º–µ –ø—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ (–¥–Ω–∏) = (–±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ * –≤—Ä–µ–º–µ_–∑–∞_—Ñ–∏–≥—É—Ä–∫–∞) / (–±—Ä–æ–π_–ø—Ä–∏–Ω—Ç–µ—Ä–∏ * —Ä–∞–±–æ—Ç–Ω–∏_—á–∞—Å–æ–≤–µ_–Ω–∞_–¥–µ–Ω)
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="printTimePerFigure">–í—Ä–µ–º–µ –∑–∞ 1 —Ñ–∏–≥—É—Ä–∫–∞ (—á–∞—Å–æ–≤–µ):</label>
                        <input type="number" id="printTimePerFigure" value="2" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="printerCount">–ë—Ä–æ–π –ø—Ä–∏–Ω—Ç–µ—Ä–∏:</label>
                        <input type="number" id="printerCount" value="3" min="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="workHoursPerDay">–†–∞–±–æ—Ç–Ω–∏ —á–∞—Å–æ–≤–µ –Ω–∞ –¥–µ–Ω:</label>
                        <input type="number" id="workHoursPerDay" value="8" min="1">
                    </div>
                </div>
                
                <div class="formula-comment">
                    <!-- –§–û–†–ú–£–õ–ê –ó–ê –í–†–ï–ú–ï –ó–ê –†–ò–°–£–í–ê–ù–ï -->
                    –í—Ä–µ–º–µ —Ä–∏—Å—É–≤–∞–Ω–µ (–¥–Ω–∏) = (–±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ * –≤—Ä–µ–º–µ_–∑–∞_—Ä–∏—Å—É–≤–∞–Ω–µ_–Ω–∞_—Ñ–∏–≥—É—Ä–∫–∞) / (–±—Ä–æ–π_—Ö—É–¥–æ–∂–Ω–∏—Ü–∏ * —Ä–∞–±–æ—Ç–Ω–∏_—á–∞—Å–æ–≤–µ_–Ω–∞_–¥–µ–Ω)
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="paintTimePerFigure">–í—Ä–µ–º–µ –∑–∞ —Ä–∏—Å—É–≤–∞–Ω–µ –Ω–∞ 1 —Ñ–∏–≥—É—Ä–∫–∞ (—á–∞—Å–æ–≤–µ):</label>
                        <input type="number" id="paintTimePerFigure" value="4" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="optimizationThreshold">–ü—Ä–∞–≥ –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–ø–æ—Ä—ä—á–∫–∏):</label>
                        <input type="number" id="optimizationThreshold" value="5" min="1">
                    </div>
                </div>
                
                <div class="formula-comment">
                    <!-- –§–û–†–ú–£–õ–ê –ó–ê –í–†–ï–ú–ï –ó–ê –û–ü–ê–ö–û–í–ê–ù–ï -->
                    –í—Ä–µ–º–µ –æ–ø–∞–∫–æ–≤–∞–Ω–µ (–¥–Ω–∏) = –±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ / –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç_–æ–ø–∞–∫–æ–≤–∞–Ω–µ_–Ω–∞_–¥–µ–Ω
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="packagingCapacity">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç –æ–ø–∞–∫–æ–≤–∞–Ω–µ (–ø–æ—Ä—ä—á–∫–∏/–¥–µ–Ω):</label>
                        <input type="number" id="packagingCapacity" value="50" min="1">
                    </div>
                </div>
                
                <button class="btn" onclick="calculateProcess()">üî¢ –ò–∑—á–∏—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å–∞</button>
                <button class="btn btn-secondary" onclick="optimizeOrder()">‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–π –ø–æ—Ä—ä—á–∫–∞—Ç–∞</button>
            </div>
            
            <div class="results" id="results">
                <h2>üìä –†–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ—Ç–æ</h2>
                <div id="processSteps"></div>
                <div class="total-time" id="totalTime"></div>
                <div id="optimizationSuggestions"></div>
            </div>
        </div>
    </div>

    <script>
        // –û–±–µ–∫—Ç –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞
        let orderData = {};
        
        function calculateProcess() {
            // –°—ä–±–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç —Ñ–æ—Ä–º–∞—Ç–∞
            collectFormData();
            
            // –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Å—Ç—ä–ø–∫–∏
            const steps = calculateAllSteps();
            
            // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
            displayResults(steps);
        }
        
        function collectFormData() {
            orderData = {
                orderType: document.getElementById('orderType').value,
                orderQuantity: parseInt(document.getElementById('orderQuantity').value),
                artistCount: parseInt(document.getElementById('artistCount').value),
                figureComplexity: parseInt(document.getElementById('figureComplexity').value),
                
                // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞ —Ñ–æ—Ä–º—É–ª–∏
                confirmationBaseTime: parseFloat(document.getElementById('confirmationBaseTime').value),
                complexityMultiplier: parseFloat(document.getElementById('complexityMultiplier').value),
                processingBaseTime: parseFloat(document.getElementById('processingBaseTime').value),
                processingCapacity: parseInt(document.getElementById('processingCapacity').value),
                printTimePerFigure: parseFloat(document.getElementById('printTimePerFigure').value),
                printerCount: parseInt(document.getElementById('printerCount').value),
                workHoursPerDay: parseInt(document.getElementById('workHoursPerDay').value),
                paintTimePerFigure: parseFloat(document.getElementById('paintTimePerFigure').value),
                optimizationThreshold: parseInt(document.getElementById('optimizationThreshold').value),
                packagingCapacity: parseInt(document.getElementById('packagingCapacity').value)
            };
        }
        
        function calculateAllSteps() {
            const steps = [];
            
            // –°—Ç—ä–ø–∫–∞ 1: –ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ
            // –§–û–†–ú–£–õ–ê: –≤—Ä–µ–º–µ_–ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ = –±–∞–∑–æ–≤–æ_–≤—Ä–µ–º–µ * –∫–æ–µ—Ñ–∏—Ü–∏–µ–Ω—Ç_—Å–ª–æ–∂–Ω–æ—Å—Ç
            const confirmationTime = orderData.confirmationBaseTime * 
                (1 + (orderData.figureComplexity - 1) * (orderData.complexityMultiplier - 1));
            
            steps.push({
                name: '–ü–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞—Ç–∞',
                time: confirmationTime,
                details: `–í—Ä–µ–º–µ –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ: ${confirmationTime.toFixed(1)} –¥–Ω–∏`,
                formula: `${orderData.confirmationBaseTime} * (1 + (${orderData.figureComplexity} - 1) * (${orderData.complexityMultiplier} - 1))`
            });
            
            // –°—Ç—ä–ø–∫–∞ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ø–∞–∫–∏—Å—Ç–∞–Ω—Ü–∏—Ç–µ (—Å–∞–º–æ –∑–∞ COD)
            let processingTime = 0;
            if (orderData.orderType === 'COD') {
                // –§–û–†–ú–£–õ–ê: –≤—Ä–µ–º–µ_–æ–±—Ä–∞–±–æ—Ç–∫–∞ = –±–∞–∑–æ–≤–æ_–≤—Ä–µ–º–µ + (–±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ / –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç)
                processingTime = orderData.processingBaseTime + 
                    (orderData.orderQuantity / orderData.processingCapacity);
                
                steps.push({
                    name: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ø–∞–∫–∏—Å—Ç–∞–Ω—Ü–∏—Ç–µ (COD)',
                    time: processingTime,
                    details: `–í—Ä–µ–º–µ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞: ${processingTime.toFixed(1)} –¥–Ω–∏`,
                    formula: `${orderData.processingBaseTime} + (${orderData.orderQuantity} / ${orderData.processingCapacity})`
                });
            }
            
            // –°—Ç—ä–ø–∫–∞ 3: –ü—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ
            // –§–û–†–ú–£–õ–ê: –≤—Ä–µ–º–µ_–ø—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ = (–±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ * –≤—Ä–µ–º–µ_–∑–∞_—Ñ–∏–≥—É—Ä–∫–∞) / (–±—Ä–æ–π_–ø—Ä–∏–Ω—Ç–µ—Ä–∏ * —Ä–∞–±–æ—Ç–Ω–∏_—á–∞—Å–æ–≤–µ)
            const totalPrintHours = orderData.orderQuantity * orderData.printTimePerFigure;
            const dailyPrintCapacity = orderData.printerCount * orderData.workHoursPerDay;
            const printTime = totalPrintHours / dailyPrintCapacity;
            
            steps.push({
                name: '–ü—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ñ–∏–≥—É—Ä–∫–∏—Ç–µ',
                time: printTime,
                details: `–í—Ä–µ–º–µ –∑–∞ –ø—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ: ${printTime.toFixed(1)} –¥–Ω–∏ (${totalPrintHours} —á–∞—Å–∞ –æ–±—â–æ)`,
                formula: `(${orderData.orderQuantity} * ${orderData.printTimePerFigure}) / (${orderData.printerCount} * ${orderData.workHoursPerDay})`
            });
            
            // –°—Ç—ä–ø–∫–∞ 4: –†–∏—Å—É–≤–∞–Ω–µ –æ—Ç —Ö—É–¥–æ–∂–Ω–∏—Ü–∏—Ç–µ
            // –§–û–†–ú–£–õ–ê: –≤—Ä–µ–º–µ_—Ä–∏—Å—É–≤–∞–Ω–µ = (–±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ * –≤—Ä–µ–º–µ_–∑–∞_—Ä–∏—Å—É–≤–∞–Ω–µ) / (–±—Ä–æ–π_—Ö—É–¥–æ–∂–Ω–∏—Ü–∏ * —Ä–∞–±–æ—Ç–Ω–∏_—á–∞—Å–æ–≤–µ)
            const totalPaintHours = orderData.orderQuantity * orderData.paintTimePerFigure * orderData.figureComplexity;
            const dailyPaintCapacity = orderData.artistCount * orderData.workHoursPerDay;
            const paintTime = totalPaintHours / dailyPaintCapacity;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≥–æ–ª–µ–º–∏ –ø–æ—Ä—ä—á–∫–∏
            let optimizationBonus = 0;
            if (orderData.orderQuantity >= orderData.optimizationThreshold) {
                optimizationBonus = Math.min(paintTime * 0.2, 1); // –î–æ 20% –Ω–∞–º–∞–ª–µ–Ω–∏–µ –∏–ª–∏ –º–∞–∫—Å–∏–º—É–º 1 –¥–µ–Ω
            }
            
            const finalPaintTime = Math.max(paintTime - optimizationBonus, 0.5); // –ú–∏–Ω–∏–º—É–º 0.5 –¥–Ω–∏
            
            steps.push({
                name: '–†–∏—Å—É–≤–∞–Ω–µ –æ—Ç —Ö—É–¥–æ–∂–Ω–∏—Ü–∏—Ç–µ',
                time: finalPaintTime,
                details: `–í—Ä–µ–º–µ –∑–∞ —Ä–∏—Å—É–≤–∞–Ω–µ: ${finalPaintTime.toFixed(1)} –¥–Ω–∏ (${totalPaintHours} —á–∞—Å–∞ –æ–±—â–æ)`,
                formula: `(${orderData.orderQuantity} * ${orderData.paintTimePerFigure} * ${orderData.figureComplexity}) / (${orderData.artistCount} * ${orderData.workHoursPerDay})`,
                optimization: optimizationBonus > 0 ? `–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: -${optimizationBonus.toFixed(1)} –¥–Ω–∏ –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω–∏–µ –Ω–∞ –≥–æ–ª–µ–º–∏—è –æ–±–µ–º` : null
            });
            
            // –°—Ç—ä–ø–∫–∞ 5: –û–ø–∞–∫–æ–≤–∞–Ω–µ –∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ
            // –§–û–†–ú–£–õ–ê: –≤—Ä–µ–º–µ_–æ–ø–∞–∫–æ–≤–∞–Ω–µ = –±—Ä–æ–π_–ø–æ—Ä—ä—á–∫–∏ / –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç_–æ–ø–∞–∫–æ–≤–∞–Ω–µ
            const packagingTime = orderData.orderQuantity / orderData.packagingCapacity;
            
            steps.push({
                name: '–û–ø–∞–∫–æ–≤–∞–Ω–µ –∏ –∏–∑–ø—Ä–∞—â–∞–Ω–µ',
                time: packagingTime,
                details: `–í—Ä–µ–º–µ –∑–∞ –æ–ø–∞–∫–æ–≤–∞–Ω–µ: ${packagingTime.toFixed(1)} –¥–Ω–∏`,
                formula: `${orderData.orderQuantity} / ${orderData.packagingCapacity}`
            });
            
            return steps;
        }
        
        function displayResults(steps) {
            const resultsDiv = document.getElementById('results');
            const processStepsDiv = document.getElementById('processSteps');
            const totalTimeDiv = document.getElementById('totalTime');
            
            // –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –æ–±—â–æ—Ç–æ –≤—Ä–µ–º–µ
            let totalTime = 0;
            let parallelTime = 0; // –ó–∞ –ø–∞—Ä–∞–ª–µ–ª–Ω–∏ –ø—Ä–æ—Ü–µ—Å–∏
            
            // –ü—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ—Ç–æ –∏ —Ä–∏—Å—É–≤–∞–Ω–µ—Ç–æ –º–æ–≥–∞—Ç –¥–∞ —Å–µ —Å–ª—É—á–≤–∞—Ç –ø–∞—Ä–∞–ª–µ–ª–Ω–æ
            const printStep = steps.find(s => s.name.includes('–ü—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ'));
            const paintStep = steps.find(s => s.name.includes('–†–∏—Å—É–≤–∞–Ω–µ'));
            
            if (printStep && paintStep) {
                parallelTime = Math.max(printStep.time, paintStep.time);
                totalTime = steps.reduce((sum, step) => {
                    if (step.name.includes('–ü—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ') || step.name.includes('–†–∏—Å—É–≤–∞–Ω–µ')) {
                        return sum; // –ù–µ –¥–æ–±–∞–≤—è–º–µ - —â–µ –¥–æ–±–∞–≤–∏–º –ø–∞—Ä–∞–ª–µ–ª–Ω–æ—Ç–æ –≤—Ä–µ–º–µ
                    }
                    return sum + step.time;
                }, 0) + parallelTime;
            } else {
                totalTime = steps.reduce((sum, step) => sum + step.time, 0);
            }
            
            // –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ HTML –∑–∞ —Å—Ç—ä–ø–∫–∏—Ç–µ
            let stepsHTML = '';
            steps.forEach((step, index) => {
                stepsHTML += `
                    <div class="process-step">
                        <div class="step-header">
                            <div class="timeline">
                                <div class="timeline-dot"></div>
                                –°—Ç—ä–ø–∫–∞ ${index + 1}: ${step.name}
                            </div>
                        </div>
                        <div class="step-details">
                            <strong>${step.details}</strong><br>
                            <div class="formula-comment">
                                –§–æ—Ä–º—É–ª–∞: ${step.formula}
                            </div>
                            ${step.optimization ? `<div class="optimization-note">üí° ${step.optimization}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            processStepsDiv.innerHTML = stepsHTML;
            totalTimeDiv.innerHTML = `
                üìÖ –û–±—â–æ –≤—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ: <strong>${totalTime.toFixed(1)} –¥–Ω–∏</strong>
                ${parallelTime > 0 ? '<br><small>* –ü—Ä–∏–Ω—Ç–∏—Ä–∞–Ω–µ—Ç–æ –∏ —Ä–∏—Å—É–≤–∞–Ω–µ—Ç–æ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞—Ç –ø–∞—Ä–∞–ª–µ–ª–Ω–æ</small>' : ''}
            `;
            
            resultsDiv.style.display = 'block';
        }
        
        function optimizeOrder() {
            collectFormData();
            
            const suggestions = [];
            
            // –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
            if (orderData.artistCount < 5 && orderData.orderQuantity > 20) {
                suggestions.push('üé® –£–≤–µ–ª–∏—á–µ—Ç–µ –±—Ä–æ—è —Ö—É–¥–æ–∂–Ω–∏—Ü–∏ –¥–æ 5 –∑–∞ –ø–æ-–±—ä—Ä–∑–æ —Ä–∏—Å—É–≤–∞–Ω–µ –Ω–∞ –≥–æ–ª–µ–º–∏ –ø–æ—Ä—ä—á–∫–∏');
            }
            
            if (orderData.printerCount < 5 && orderData.orderQuantity > 30) {
                suggestions.push('üñ®Ô∏è –î–æ–±–∞–≤–µ—Ç–µ –æ—â–µ –ø—Ä–∏–Ω—Ç–µ—Ä–∏ –∑–∞ –ø–æ-–±—ä—Ä–∑–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –ø—Ä–∏ –≥–æ–ª–µ–º–∏ –æ–±–µ–º–∏');
            }
            
            if (orderData.figureComplexity > 3) {
                suggestions.push('‚ö° –ü—Ä–∏ –≤–∏—Å–æ–∫–æ—Å–ª–æ–∂–Ω–∏ —Ñ–∏–≥—É—Ä–∫–∏ –ø–æ–º–∏—Å–ª–µ—Ç–µ –∑–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –ø–ª–∞–Ω–∏—Ä–∞–Ω–µ –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ');
            }
            
            if (orderData.orderQuantity >= orderData.optimizationThreshold) {
                suggestions.push('‚úÖ –ü–æ—Ä—ä—á–∫–∞—Ç–∞ –≤–∏ –µ –¥–æ—Å—Ç–∞—Ç—ä—á–Ω–æ –≥–æ–ª—è–º–∞ –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ –æ—Ç—Å—Ç—ä–ø–∫–∏ –≤—ä–≤ –≤—Ä–µ–º–µ—Ç–æ');
            }
            
            // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ç–∞
            const optimizationDiv = document.getElementById('optimizationSuggestions');
            if (suggestions.length > 0) {
                optimizationDiv.innerHTML = `
                    <div style="background: #f0f8f0; border: 2px solid #28a745; border-radius: 10px; padding: 20px; margin-top: 20px;">
                        <h3>üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:</h3>
                        <ul style="margin: 15px 0; padding-left: 20px;">
                            ${suggestions.map(s => `<li style="margin: 8px 0;">${s}</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else {
                optimizationDiv.innerHTML = `
                    <div style="background: #f0f8f0; border: 2px solid #28a745; border-radius: 10px; padding: 20px; margin-top: 20px;">
                        <h3>‚úÖ –ü–æ—Ä—ä—á–∫–∞—Ç–∞ –≤–∏ –µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∞!</h3>
                        <p>–¢–µ–∫—É—â–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞ –ø–æ–¥—Ö–æ–¥—è—â–∏ –∑–∞ —Ç–æ–∑–∏ –æ–±–µ–º –ø–æ—Ä—ä—á–∫–∏.</p>
                    </div>
                `;
            }
            
            // –ò–∑—á–∏—Å–ª—è–≤–∞–º–µ –∏ –ø–æ–∫–∞–∑–≤–∞–º–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
            calculateProcess();
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('change', function() {
                    // –ú–æ–∂–µ—Ç–µ –¥–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏–µ —Ç—É–∫ –∞–∫–æ –∂–µ–ª–∞–µ—Ç–µ
                    // calculateProcess();
                });
            });
        });
    </script>
</body>
</html>